<!DOCTYPE 
  HTML PUBLIC 
  "-//W3C//DTD HTML 4.01 Transitional//EN" 
  "http://www.w3.org/TR/html4/loose.dtd">

<html><head>
<title>Plot2 Documentation : Doc - Perl Import browse</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style>  <meta name='robots' content='index,follow' />

<link rel='stylesheet' href='plot2.css' type='text/css' />
</head>

<body bgcolor="#ffffff">

<div id="main">
	<div class="content-mat">
		<div id="content">
			<div id='sidebar'><div><img src='Plot2Icon.png' alt='' title='' /></div>
<div class='vspace'></div><h2>Home</h2>
<p><a class='wikilink' href='Introduction.html'>Introduction</a>
</p>
<div class='vspace'></div><h2>References</h2>
<p><a class='wikilink' href='Toolbar.html'>Toolbar</a><br /><a class='wikilink' href='Expressions.html'>Expressions</a><br /><a class='wikilink' href='TimeFormat.html'>Time Format</a><br /><a class='wikilink' href='Preferences.html'>Preferences</a><br /><a class='wikilink' href='Import.html'>Import</a><br /><a class='selflink' href='PerlImport.html'>Perl Import Filter</a><br /><a class='wikilink' href='PerlFilter.html'>Perl Data Filter</a><br /><a class='wikilink' href='CommandLine.html'>Command Line</a>
</p>
<div class='vspace'></div><h2>Inspectors</h2>
<p><a class='wikilink' href='DataBufferInspector.html'>Data Buffer</a><br /><a class='wikilink' href='DataInspector.html'>Data</a><br /><a class='wikilink' href='MacroEditor.html'>Macro</a><br /><a class='wikilink' href='MysqlImportEditor.html'>MySQL</a>
</p>
<div class='vspace'></div><h2>Macro</h2>
<p><a class='wikilink' href='MacroLanguage.html'>Macro Language</a><br /><a class='wikilink' href='MacroRangeCommands.html'>Range</a><br /><a class='wikilink' href='MacroBufferCommands.html'>Buffer</a><br /><a class='wikilink' href='MacroControlCommands.html'>Control</a><br /><a class='wikilink' href='MacroInteractiveCommands.html'>Interactive</a><br /><a class='wikilink' href='MacroCalculationCommands.html'>Calculation</a><br /><a class='wikilink' href='MacroStyleCommands.html'>Style</a><br /><a class='wikilink' href='MacroDataStyleCommands.html'>Data Style</a><br /><a class='wikilink' href='MacroAxisStyleCommands.html'>Axis Style</a><br /><a class='wikilink' href='MacroLegendCommands.html'>Legend</a><br /><a class='wikilink' href='MacroTextGraphicCommands.html'>Text &amp; Graphic</a><br /><a class='wikilink' href='MacroDocumentCommands.html'>Document</a><br /><a class='wikilink' href='MacroMiscCommands.html'>Miscellaneous</a>
</p>
<div class='vspace'></div><h2>Miscellaneous</h2>
<p><a class='wikilink' href='Contact.html'>Contact</a><br /><a class='wikilink' href='Warranty.html'>Warranty</a>
</p>
<div class='vspace'></div>
</div>
				<!--PageText-->
<div id='wikitext'>
<h1>Perl Import Filter</h1>
<p><em>Perl</em> based import filter can be very useful to import files with unusual data format. <em>Plot</em> builds an easy to access framework around your script which allow to pass the data to <em>Plot</em>. Errors produced by the script will be shown in the console of the inspector.
</p>
<p class='vspace'>To create a <em>Perl</em> import filter open the macro editor, choose <em>Add</em> in the panel, and select <em>Perl Import</em> as type. In the large text field of the macro editor you can now enter your script.
</p>
<div class='vspace'></div><h2>Predefinitions</h2>
<p>The following variables and subroutines are available in your <em>Perl</em> import filter:
</p>
<p class='vspace'><code>$file</code>
</p><div class='indent'>The filename of the file you want to import.
</div><p class='vspace'><code>&amp;log()</code>
</p><div class='indent'>Send output to the console in the macro editor.
</div><p class='vspace'><code>@data[buffer][point number][column]</code>
</p><div class='indent'>A three dimensional array which should contain the data at the end of your script.
</div><div class='indent'><code>[buffer]</code>: The number of the buffer (starting with 0)
</div><div class='indent'><code>[point number]</code>: The number of the data points (starting with 0)
</div><div class='indent'><code>[column]</code>: The column number (0 = X value, 1 = Y value, 2 = X error, 3 = Y error) 
</div><p class='vspace'><code>@comment[buffer]</code>
</p><div class='indent'>In this array you can set comments for each imported buffer.
</div><p class='vspace'><code>@source[buffer]</code>
</p><div class='indent'>In this array you can set source information for each imported buffer.
</div><p class='vspace'><code>%var{key}</code>
</p><div class='indent'>If the script is started from a macro this hash contains all number variables. The variables will also be returned to the macro.
</div><p class='vspace'><code>%svar{key}</code>
</p><div class='indent'>If the script is started from a macro this hash contains all string variables. The variables will also be returned to the macro.
</div><div class='vspace'></div><h2>Restrictions</h2>
<ul><li><strong>Do not send anything to STDERR and STDOUT.</strong>
</li><li><strong>Do not use any interactive things.</strong>
</li></ul><div class='vspace'></div><h2>Example</h2>
<p>The following example demonstrates how to import a file containing two columns separated by <code>&lt;Tab&gt;</code>. The script also checks for the correct number of columns and sets the buffer comment. 
</p>
<div class='vspace'></div><pre> open(IN,$file);
 $n=0;
 while(&lt;IN&gt;) {
   @tmp=split('\t');
   if ($#tmp==1) {
     $data[0][$n][0]=$tmp[0];
     $data[0][$n][1]=$tmp[1];
     $n++	
   }
 }
 close(IN);
 $comment[0]='Test';
 &amp;log("$n number of points");
</pre><p class='vspace'><br clear='all' />
</p>
</div>

			</div>
	</div>
</div>
</body></html>
